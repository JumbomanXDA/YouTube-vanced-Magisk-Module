
# Detach script - Disable Play store updates for vanced YouTube
# Wait for 1 minute before executing detach script
sleep 60

LDB=/data/data/com.android.vending/databases/library.db
LADB=/data/data/com.android.vending/databases/localappstate.db

GET_LDB=`sqlite3 $LDB "SELECT doc_type,doc_id FROM ownership" | grep com.google.android.youtube | head -n 1 | grep -o 25`
GET_LADB=`sqlite3 $LADB "SELECT auto_update,package_name FROM appstate" | grep com.google.android.youtube | head -n 1 | grep -o 2`

if [[ "$GET_LDB" != "25" || "$GET_LADB" != "2" ]]; then
	# Force Disable Play store
	pm disable com.android.vending > /dev/null 2>&1
	
	# Update database
	sqlite3 $LDB "UPDATE ownership SET doc_type = '25' where doc_id = 'com.google.android.youtube'"
	sqlite3 $LADB "UPDATE appstate SET auto_update = '2' where package_name = 'com.google.android.youtube'"
	
	# Re-enable Play store
	pm enable com.android.vending > /dev/null 2>&1
fi

# Run crond demon on boot
busybox crond -b -c /data/adb/modules/VancedYT/crontabs

